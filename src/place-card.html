<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/paper-styles/color.html">
<link rel="import" href="../bower_components/paper-styles/typography.html">

<dom-module id="place-card">

  <template>
  <style include="iron-flex iron-flex-alignment">

  <style is="custom-style">
  body {
    display: flex;
    align-items: center;
    justify-content: center;
  }
  a {
    text-decoration: none;
  }
  .card {
    @apply --layout-flex;
    @apply(--layout-horizontal);
    @apply(--layout-wrap);
    box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
    margin-bottom: 32px;
  }
  .card-header {
    @apply(--layout-flex);
  }
  .title {
    @apply(--paper-font-headline);
    font-size: 24px;
  }
  .location {
    font-size: 15px;
    vertical-align: middle;
    color: var(--paper-grey-600);
  }
  .card-image-content {
    @apply --layout-flex;
    display: block;
    text-align: center;
    vertical-align: middle;
  }
  .card-image {
    width: 300px;
    height: 300px;
    border-radius: 3px;
    padding: 8px;
  }
  .card-text-content {
    @apply --layout-flex-2;
    -webkit-flex: 1 1 500px;
    padding: 8px;
  }

  paper-icon-button.star {
    --paper-icon-button-width: 24px;
    --paper-icon-button-height: 24px;
    color: var(--paper-amber-500);
    padding-left: 8px;
    padding-right: 8px;
  }
  paper-icon-button.star-negative {
    --paper-icon-button-width: 24px;
    --paper-icon-button-height: 24px;
    color: var(--paper-grey-500);
    padding-left: 8px;
    padding-right: 8px;
  }
  paper-icon-button.location {
    --paper-icon-button-width: 24px;
    --paper-icon-button-height: 24px;
    padding: 0;
    color: var(--paper-grey-500);
  }
  </style>

  <div class="card">
    <div class="card-image-content">
      <img class="card-image" src$=[[image]]></img>
    </div>
    <div class="card-text-content">
      <div class="card-header">
        <div class="title">
          <a href$=[[url]]>[[name]]</a>
        </div>
      </div>
      <div class="location">
        <a href$=[[googleMapsURL]] target="_blank">
          <paper-icon-button class="location" icon="location-pin" disabled></paper-icon-button>

          <span>[[address]]</span>
        </a>
      </div>
      <div class="rating">
        <paper-icon-button class$=[[stars.0]] icon="star" disabled></paper-icon-button>
        <paper-icon-button class$=[[stars.1]] icon="star" disabled></paper-icon-button>
        <paper-icon-button class$=[[stars.2]] icon="star" disabled></paper-icon-button>
        <paper-icon-button class$=[[stars.3]] icon="star" disabled></paper-icon-button>
        <paper-icon-button class$=[[stars.4]] icon="star" disabled></paper-icon-button>
      </div>
      <p>[[dollars]]ãƒ»[[type]]</p>
      <p>[[description]]</p>
    </div>
  </div>

</template>

<script>

class NewsPlace extends Polymer.Element {

  static get is() { return 'place-card'; }

  static get properties() { return {
    name: String,
    url: String,
    address: String,
    dollars: String,
    type: String,
    description: String,
    image: String,
    rating: Number,
    stars: {
      type: Array,
      computed: '_computeStars(rating)',
      notify: true
    },
    googleMapsURL: {
      type: String,
      computed: '_computeGoogleMaps(address)'
    }
  }}

  _computeStars(rating) {
    var array= Array;
    for (var i=0; i<5; i++) {
      if (i <= rating-1) {
        array[i] = "star";
      } else {
        array[i] = "star-negative";
      }
    }
    return array;
  }
  _computeGoogleMaps(address) {
    return 'https://www.google.ca/maps/search/' + address + '?hl=en&source=opensearch';
  }

  connectedCallback() {
    super.connectedCallback();
  }
}

customElements.define(NewsPlace.is, NewsPlace);

</script>

</dom-module>
